# notepad-buffer
A buffer reader for notepad TabState buffers.  
> [!WARNING]
> This project is in early development. Things may change. Sorry for any inconvenience.

## Does it work?
Lmao

## How do I use it?
The tab buffers are located in `%localappdata%\Packages\Microsoft.WindowsNotepad_8wekyb3d8bbwe\LocalState\TabState`.

Thank you to @nas_bench and @_JohnHammond for cluing me into this location.

Read one of the files and pass it in to `NPBufferReader::new()` as a slice. Call the `get_refs()` method to get references 
to parts of the buffer.

There are some printlines for things I am not sure about, so if you see this print some extra lines in your console, please
let me know, so I can check out what is wrong.

The `NPBufferReader` type is there for the future. This type will handle other stuff, later, probably. Right now it just
checks that you aren't passing in an empty buffer. I will probably change it to also check the magic bytes.

```rust

fn get_tab_state_buffer(buffer: &[u8]) -> std::io::Result<NPRefs> {
    let np = NPBufferReader::new(buffer)?;
    np.get_refs()
}

fn main() {
    let file = std::fs::read_dir(r"P:/ath/to/notepad/tabstate/buffer.bin").unwrap();
    let refs = get_tab_state_buffer(&file[..]).expect("Could not read TabState buffer.");
    
    println!("{:?}", refs.get_path().unwrap_or_default());
    println!("{:?}", refs.get_buffer());
}
```

## How can I contribute?
Open a github issue, or message me on discord. Name is `Nordgaren`. GitHub issues is easier. If I don't get to you on Discord
you can @ me in any shared server we have. I am in John Hammonds Discord. You can also try e-mailing me at `nordgarentv@gmail.com`

The functions are heavily documented. I just kinda put my thoughts on why I did things the way I did, and what I have seen
in samples, thus far. The samples are being generated by opening new tabs with existing files and inspecting the new files 
notepad makes. I have generated some unsaved tab buffers .

Also shout out to John Hammond who told me the unsaved buffers are different when notepad closes! Huzzah! WTH?!

## Todo
> Figure out any inkling of how the unsaved buffers work.  